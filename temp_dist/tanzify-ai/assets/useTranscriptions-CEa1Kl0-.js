import{c as l,r as c,v as f,t as p}from"./index-CbSAwoIm.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=l("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=l("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),x=()=>{const[o,s]=c.useState([]),[g,d]=c.useState(!0),{user:i}=f(),u=c.useCallback(async()=>{if(i)try{d(!0);const a=(await p.getUserTranscriptions(i.id)).map(t=>({id:t.id,filename:t.original_filename,text:t.transcript,language:t.language,duration:t.duration,createdAt:new Date(t.created_at),status:t.status}));s(a)}catch(r){console.error("Error loading transcriptions:",r);const a=localStorage.getItem("tanzify_transcriptions");if(a){const t=JSON.parse(a).map(e=>({...e,createdAt:new Date(e.createdAt)}));s(t)}}finally{d(!1)}},[i]);return c.useEffect(()=>{i?u():(s([]),d(!1))},[i,u]),{transcriptions:o,loading:g,addTranscription:async r=>{if(i)try{const a={user_id:i.id,filename:`${Date.now()}-${Math.random().toString(36).substring(2)}`,original_filename:r.filename,s3_key:"",transcript:r.text,language:r.language,duration:r.duration,status:r.status},t=await p.createTranscription(a),e={...r,id:t.id,createdAt:new Date(t.created_at)};return s(n=>[e,...n]),t}catch(a){console.error("Error adding transcription:",a);const t={...r,id:Date.now().toString(),createdAt:new Date},e=[t,...o];return s(e),localStorage.setItem("tanzify_transcriptions",JSON.stringify(e)),t}},updateTranscription:async(r,a)=>{try{const t={};a.status&&(t.status=a.status),a.text&&(t.transcript=a.text),Object.keys(t).length>0&&await p.updateTranscriptionStatus(r,a.status||"processing",a.text);const e=o.map(n=>n.id===r?{...n,...a}:n);s(e)}catch(t){console.error("Error updating transcription:",t);const e=o.map(n=>n.id===r?{...n,...a}:n);s(e),localStorage.setItem("tanzify_transcriptions",JSON.stringify(e))}},loadTranscriptions:u}};export{T as C,w as F,x as u};
